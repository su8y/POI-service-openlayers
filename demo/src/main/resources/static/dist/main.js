var common;!function(){var t={136:function(){new ol.layer.Tile({source:new ol.source.OSM});var t=new ol.source.Vector,e=new ol.layer.Vector({source:t,style:new ol.style.Style({stroke:new ol.style.Stroke({width:2,color:[0,0,255,1]})})}),n=new ol.Map({layers:[new ol.layer.Tile({source:new ol.source.OSM}),e],target:"map",view:new ol.View({center:[14149156.937231855,4510270.163387867],zoom:18})});n.on("click",(e=>{var i=n.getSize(),s=n.getView().calculateExtent(i),o=ol.proj.toLonLat(ol.extent.getBottomLeft(s)),r=ol.proj.toLonLat(ol.extent.getTopRight(s)),a=ol.proj.toLonLat(ol.extent.getBottomRight(s)),h=ol.proj.toLonLat(ol.extent.getTopLeft(s)),l=new ol.Feature(new ol.geom.LineString([[o[0],o[1]],[a[0],a[1]],[r[0],r[1]],[h[0],h[1]],[o[0],o[1]]])),c=[[o[0],o[1]],[a[0],a[1]],[r[0],r[1]],[h[0],h[1]],[o[0],o[1]]];console.log(c);var d=ol.proj.get("EPSG:4326"),u=ol.proj.get("EPSG:3857");l.getGeometry().transform(d,u),t.addFeatures([l])}))}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};!function(){"use strict";n.r(i);var t={};n.r(t);var e=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},s="propertychange",o=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function r(t,e){return t>e?1:t<e?-1:0}function a(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"==typeof n){for(let s=1;s<i;++s){const i=t[s];if(i===e)return s;if(i<e)return n(e,t[s-1],i)>0?s-1:s}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return i-1}function h(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function l(){return!0}function c(){return!1}function d(){}function u(t){for(const e in t)delete t[e]}var g=class extends o{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const n="string"==typeof t,i=n?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const o=n?new e(t):t;o.target||(o.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let h;i in r||(r[i]=0,a[i]=0),++r[i];for(let t=0,e=s.length;t<e;++t)if(h="handleEvent"in s[t]?s[t].handleEvent(o):s[t].call(this,o),!1===h||o.propagationStopped){h=!1;break}if(0==--r[i]){let t=a[i];for(delete a[i];t--;)this.removeEventListener(i,d);delete r[i]}return h}disposeInternal(){this.listeners_&&u(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=d,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}},p="change",m="contextmenu",f="click",v="keydown",y="keypress",C="touchmove",E="wheel";function x(t,e,n,i,s){if(i&&i!==t&&(n=n.bind(i)),s){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function w(t,e,n,i){return x(t,e,n,i,!0)}function R(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),u(t))}class b extends g{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(p)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=x(this,t[s],e);return i}return x(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let s=0;s<i;++s)n[s]=w(this,t[s],e)}else n=w(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)R(t[e]);else R(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}b.prototype.on,b.prototype.once,b.prototype.un;var L=b;function I(){throw new Error("Unimplemented abstract method.")}let P=0;function S(t){return t.ol_uid||(t.ol_uid=String(++P))}class M extends e{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}var T=class extends L{constructor(t){super(),this.on,this.once,this.un,S(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new M(n,t,e)),n=s,this.hasListener(n)&&this.dispatchEvent(new M(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],function(t){let e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}}};const A={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class N extends Error{constructor(t){const e=A[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}var O=N,D="add",F="remove";const z="length";class k extends e{constructor(t,e,n){super(t),this.element=e,this.index=n}}var K=class extends T{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(z)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new k(D,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new k(F,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new k(F,n,t)),this.dispatchEvent(new k(D,e,t))}updateLength_(){this.set(z,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new O(58)}};function G(t,e){if(!t)throw new O(e)}function V(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Z(t,e,n,i,s,o,r,a){const h=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=s*h,t[2]=-i*h,t[3]=s*l,t[4]=r*i*l-a*i*h+e,t[5]=r*s*h+a*s*l+n,t}new Array(6);var j={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function B(t,e,n){let i,s;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+s*s}function U(t,e){const n=t[0],i=t[1],s=t[2],o=t[3],r=e[0],a=e[1];let h=j.UNKNOWN;return r<n?h|=j.LEFT:r>s&&(h|=j.RIGHT),a<i?h|=j.BELOW:a>o&&(h|=j.ABOVE),h===j.UNKNOWN&&(h=j.INTERSECTING),h}function q(t,e,n,i,s){return s?(s[0]=t,s[1]=e,s[2]=n,s[3]=i,s):[t,e,n,i]}function H(t){return q(1/0,1/0,-1/0,-1/0,t)}function W(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function X(t,e,n,i,s){for(;n<i;n+=s)Y(t,e[n],e[n+1]);return t}function Y(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Q(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function $(t,e,n,i,s){const[o,r,a,h,l,c,d,u]=function(t,e,n,i){const s=e*i[0]/2,o=e*i[1]/2,r=Math.cos(n),a=Math.sin(n),h=s*r,l=s*a,c=o*r,d=o*a,u=t[0],g=t[1];return[u-h+d,g-l-c,u-h-d,g-l+c,u+h-d,g+l+c,u+h+d,g+l-c,u-h+d,g-l-c]}(t,e,n,i);return q(Math.min(o,a,l,d),Math.min(r,h,c,u),Math.max(o,a,l,d),Math.max(r,h,c,u),s)}function J(t){return t[3]-t[1]}function tt(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return nt(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):H(i),i}function et(t){return t[2]-t[0]}function nt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function it(t){return t[2]<t[0]||t[3]<t[1]}function st(t,e,n){return Math.min(Math.max(t,e),n)}function ot(t,e,n,i,s,o){const r=s-n,a=o-i;if(0!==r||0!==a){const h=((t-n)*r+(e-i)*a)/(r*r+a*a);h>1?(n=s,i=o):h>0&&(n+=r*h,i+=a*h)}return rt(t,e,n,i)}function rt(t,e,n,i){const s=n-t,o=i-e;return s*s+o*o}function at(t,e){const n=t%e;return n*e<0?n+e:n}function ht(t,e,n){return t+n*(e-t)}function lt(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}(n):"null")}const ct=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=lt(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const s=lt(t,e,n);this.cache_[s]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};var dt="opacity",ut="visible",gt="extent",_t="zIndex",pt="maxResolution",mt="minResolution",ft="maxZoom",vt="minZoom",yt="source",Ct=class extends T{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[dt]=void 0!==t.opacity?t.opacity:1,G("number"==typeof e[dt],64),e[ut]=void 0===t.visible||t.visible,e[_t]=t.zIndex,e[pt]=void 0!==t.maxResolution?t.maxResolution:1/0,e[mt]=void 0!==t.minResolution?t.minResolution:0,e[vt]=void 0!==t.minZoom?t.minZoom:-1/0,e[ft]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=st(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return I()}getLayerStatesArray(t){return I()}getExtent(){return this.get(gt)}getMaxResolution(){return this.get(pt)}getMinResolution(){return this.get(mt)}getMinZoom(){return this.get(vt)}getMaxZoom(){return this.get(ft)}getOpacity(){return this.get(dt)}getSourceState(){return I()}getVisible(){return this.get(ut)}getZIndex(){return this.get(_t)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(gt,t)}setMaxResolution(t){this.set(pt,t)}setMinResolution(t){this.set(mt,t)}setMaxZoom(t){this.set(ft,t)}setMinZoom(t){this.set(vt,t)}setOpacity(t){G("number"==typeof t,64),this.set(dt,t)}setVisible(t){this.set(ut,t)}setZIndex(t){this.set(_t,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Et="precompose",xt="rendercomplete",wt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Rt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var bt=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Rt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Lt=6378137,It=Math.PI*Lt,Pt=[-It,-It,It,It],St=[-180,-85,180,85],Mt=Lt*Math.log(Math.tan(Math.PI/2));class Tt extends bt{constructor(t){super({code:t,units:"m",extent:Pt,global:!0,worldExtent:St,getPointResolution:function(t,e){return t/Math.cosh(e[1]/Lt)}})}}const At=[new Tt("EPSG:3857"),new Tt("EPSG:102100"),new Tt("EPSG:102113"),new Tt("EPSG:900913"),new Tt("http://www.opengis.net/def/crs/EPSG/0/3857"),new Tt("http://www.opengis.net/gml/srs/epsg.xml#3857")];const Nt=[-180,-90,180,90],Ot=6378137*Math.PI/180;class Dt extends bt{constructor(t,e){super({code:t,units:"degrees",extent:Nt,axisOrientation:e,global:!0,metersPerUnit:Ot,worldExtent:Nt})}}const Ft=[new Dt("CRS:84"),new Dt("EPSG:4326","neu"),new Dt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Dt("urn:ogc:def:crs:OGC:2:84"),new Dt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Dt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Dt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let zt={},kt={};function Kt(t,e,n){const i=t.getCode(),s=e.getCode();i in kt||(kt[i]={}),kt[i][s]=n}function Gt(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Vt(t,e){const n=Math.cos(e),i=Math.sin(e),s=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=s,t[1]=o,t}const Zt={info:1,warn:2,error:3,none:4};let jt=Zt.info;function Bt(){jt>Zt.warn||console.warn(...arguments)}let Ut=!0;function qt(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function Ht(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Wt(t){!function(t,e){zt[t]=e}(t.getCode(),t),Kt(t,t,qt)}function Xt(t){return"string"==typeof t?zt[e=t]||zt[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Yt(t){!function(t){t.forEach(Wt)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Kt(e,t,qt)}))}))}function Qt(t,e){return t?"string"==typeof t?Xt(t):t:Xt(e)}function $t(t,e){return function(t,e){let n=function(t,e){let n;return t in kt&&e in kt[t]&&(n=kt[t][e]),n}(t.getCode(),e.getCode());return n||(n=Ht),n}(Xt(t),Xt(e))}let Jt=null;function te(){return Jt}function ee(t,e){return t}function ne(t,e){return Ut&&!Gt(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Ut=!1,Bt("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function ie(t,e){return t}var se,oe,re;function ae(t,e,n){return function(i,s,o,r,a){if(!i)return;if(!s&&!e)return i;const h=e?0:o[0]*s,l=e?0:o[1]*s,c=a?a[0]:0,d=a?a[1]:0;let u=t[0]+h/2+c,g=t[2]-h/2+c,_=t[1]+l/2+d,p=t[3]-l/2+d;u>g&&(u=(g+u)/2,g=u),_>p&&(_=(p+_)/2,p=_);let m=st(i[0],u,g),f=st(i[1],_,p);if(r&&n&&s){const t=30*s;m+=-t*Math.log(1+Math.max(0,u-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-g)/t),f+=-t*Math.log(1+Math.max(0,_-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-p)/t)}return[m,f]}}function he(t){return t}function le(t,e,n,i){const s=et(e)/n[0],o=J(e)/n[1];return i?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function ce(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),st(i,n/2,2*e)}function de(t,e,n,i,s){return n=void 0===n||n,function(o,r,a,h){if(void 0!==o){const r=i?le(t,i,a,s):t;return n&&h?ce(o,r,e):st(o,e,r)}}}function ue(t){if(void 0!==t)return 0}function ge(t){if(void 0!==t)return t}function _e(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function pe(t){return 3*t*t-2*t*t*t}function me(t){return t}Yt(At),Yt(Ft),se=At,oe=function(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let s=0;s<i;s+=n){e[s]=It*t[s]/180;let n=Lt*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));n>Mt?n=Mt:n<-Mt&&(n=-Mt),e[s+1]=n}return e},re=function(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let s=0;s<i;s+=n)e[s]=180*t[s]/It,e[s+1]=360*Math.atan(Math.exp(t[s+1]/Lt))/Math.PI-90;return e},Ft.forEach((function(t){se.forEach((function(e){Kt(t,e,oe),Kt(e,t,re)}))}));const fe=[1,0,0,1,0,0];var ve=class extends T{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,n,i,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===i&&h(o,n)||(s=!0,i=this,n=o,e=t.apply(this,arguments)),e}}((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return I()}closestPointXY(t,e,n,i){return I()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return I()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&H(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){I()}scale(t,e,n){I()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return I()}getType(){return I()}applyTransform(t){I()}intersectsExtent(t){return I()}translate(t,e){I()}transform(t,e){const n=Xt(t),i="tile-pixels"==n.getUnits()?function(t,i,s){const o=n.getExtent(),r=n.getWorldExtent(),a=J(r)/J(o);return Z(fe,r[0],r[3],a,-a,0,0,0),function(t,e,n,i,s,o){o=o||[];let r=0;for(let e=0;e<n;e+=i){const n=t[e],i=t[e+1];o[r++]=s[0]*n+s[2]*i+s[4],o[r++]=s[1]*n+s[3]*i+s[5]}o&&o.length!=r&&(o.length=r)}(t,0,t.length,s,fe,i),$t(n,e)(t,i,s)}:$t(n,e);return this.applyTransform(i),this}};function ye(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var Ce=class extends ve{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return e=this.flatCoordinates,0,n=this.flatCoordinates.length,i=this.stride,X(H(t),e,0,n,i);var e,n,i}getCoordinates(){return I()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=ye(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){I()}setLayout(t,e,n){let i;if(t)i=ye(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,o,r){r=r||[];const a=Math.cos(s),h=Math.sin(s),l=o[0],c=o[1];let d=0;for(let e=0;e<n;e+=i){const n=t[e]-l,s=t[e+1]-c;r[d++]=l+n*a-s*h,r[d++]=c+n*h+s*a;for(let n=e+2;n<e+i;++n)r[d++]=t[n]}r&&r.length!=d&&(r.length=d)}(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=Q(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();!function(t,e,n,i,s,o,r,a){a=a||[];const h=r[0],l=r[1];let c=0;for(let e=0;e<n;e+=i){const n=t[e]-h,r=t[e+1]-l;a[c++]=h+s*n,a[c++]=l+o*r;for(let n=e+2;n<e+i;++n)a[c++]=t[n]}a&&a.length!=c&&(a.length=c)}(i,0,i.length,s,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,o,r){r=r||[];let a=0;for(let e=0;e<n;e+=i){r[a++]=t[e]+s,r[a++]=t[e+1]+o;for(let n=e+2;n<e+i;++n)r[a++]=t[n]}r&&r.length!=a&&(r.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}};function Ee(t,e,n,i,s,o,r){const a=t[e],h=t[e+1],l=t[n]-a,c=t[n+1]-h;let d;if(0===l&&0===c)d=e;else{const u=((s-a)*l+(o-h)*c)/(l*l+c*c);if(u>1)d=n;else{if(u>0){for(let s=0;s<i;++s)r[s]=ht(t[e+s],t[n+s],u);return void(r.length=i)}d=e}}for(let e=0;e<i;++e)r[e]=t[d+e];r.length=i}function xe(t,e,n,i,s){let o=t[e],r=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=rt(o,r,n,i);a>s&&(s=a),o=n,r=i}return s}function we(t,e,n,i,s,o,r,a,h,l,c){if(e==n)return l;let d,u;if(0===s){if(u=rt(r,a,t[e],t[e+1]),u<l){for(d=0;d<i;++d)h[d]=t[e+d];return h.length=i,u}return l}c=c||[NaN,NaN];let g=e+i;for(;g<n;)if(Ee(t,g-i,g,i,r,a,c),u=rt(r,a,c[0],c[1]),u<l){for(l=u,d=0;d<i;++d)h[d]=c[d];h.length=i,g+=i}else g+=i*Math.max((Math.sqrt(u)-Math.sqrt(l))/s|0,1);if(o&&(Ee(t,n-i,e,i,r,a,c),u=rt(r,a,c[0],c[1]),u<l)){for(l=u,d=0;d<i;++d)h[d]=c[d];h.length=i}return l}function Re(t,e,n,i){for(let s=0,o=n.length;s<o;++s){const o=n[s];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function be(t,e){return e*Math.round(t/e)}function Le(t,e,n,i,s,o,r){if(e==n)return r;let a,h,l=be(t[e],s),c=be(t[e+1],s);e+=i,o[r++]=l,o[r++]=c;do{if(a=be(t[e],s),h=be(t[e+1],s),(e+=i)==n)return o[r++]=a,o[r++]=h,r}while(a==l&&h==c);for(;e<n;){const n=be(t[e],s),d=be(t[e+1],s);if(e+=i,n==a&&d==h)continue;const u=a-l,g=h-c,_=n-l,p=d-c;u*p==g*_&&(u<0&&_<u||u==_||u>0&&_>u)&&(g<0&&p<g||g==p||g>0&&p>g)?(a=n,h=d):(o[r++]=a,o[r++]=h,l=a,c=h,a=n,h=d)}return o[r++]=a,o[r++]=h,r}function Ie(t,e,n,i,s){s=void 0!==s?s:[];let o=0;for(let r=e;r<n;r+=i)s[o++]=t.slice(r,r+i);return s.length=o,s}function Pe(t,e,n,i){let s=0,o=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];s+=r*n-o*i,o=n,r=i}return s/2}class Se extends Ce{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Se(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<B(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),we(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Pe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function(t,e,n,i,s,o,r){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[r++]=t[e],o[r++]=t[e+1];return r}const h=new Array(a);h[0]=1,h[a-1]=1;const l=[e,n-i];let c=0;for(;l.length>0;){const n=l.pop(),o=l.pop();let r=0;const a=t[o],d=t[o+1],u=t[n],g=t[n+1];for(let e=o+i;e<n;e+=i){const n=ot(t[e],t[e+1],a,d,u,g);n>r&&(c=e,r=n)}r>s&&(h[(c-e)/i]=1,o+i<c&&l.push(o,c),c+i<n&&l.push(c,n))}for(let n=0;n<a;++n)h[n]&&(o[r++]=t[e+n*i],o[r++]=t[e+n*i+1]);return r}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Se(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Re(this.flatCoordinates,0,t,this.stride),this.changed()}}var Me=Se;class Te extends Ce{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Te(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const s=this.flatCoordinates,o=rt(t,e,s[0],s[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=s[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return function(t,e){const n=t[0],i=t[1];return q(n,i,n,i,e)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}var Ae=Te;function Ne(t,e,n,i,s){const o=function(t,e){let n;return n=e(function(t){return[t[0],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[3]]}(t)),n||(n=e(function(t){return[t[0],t[3]]}(t)),n||!1)))}(s,(function(s){return!Oe(t,e,n,i,s[0],s[1])}));return!o}function Oe(t,e,n,i,s,o){let r=0,a=t[n-i],h=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];h<=o?i>o&&(n-a)*(o-h)-(s-a)*(i-h)>0&&r++:i<=o&&(n-a)*(o-h)-(s-a)*(i-h)<0&&r--,a=n,h=i}return 0!==r}function De(t,e,n,i,s,o){if(0===n.length)return!1;if(!Oe(t,e,n[0],i,s,o))return!1;for(let e=1,r=n.length;e<r;++e)if(Oe(t,n[e-1],n[e],i,s,o))return!1;return!0}function Fe(t,e,n,i,s){const o=X([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!nt(s,o)&&(a=o,(r=s)[0]<=a[0]&&a[2]<=r[2]&&r[1]<=a[1]&&a[3]<=r[3]||o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]||function(t,e,n,i,o){let r;for(e+=i;e<n;e+=i)if(a=t.slice(e-i,e),h=t.slice(e,e+i),r=function(t,e,n){let i=!1;const s=U(t,e),o=U(t,n);if(s===j.INTERSECTING||o===j.INTERSECTING)i=!0;else{const r=t[0],a=t[1],h=t[2],l=t[3],c=e[0],d=e[1],u=n[0],g=n[1],_=(g-d)/(u-c);let p,m;o&j.ABOVE&&!(s&j.ABOVE)&&(p=u-(g-l)/_,i=p>=r&&p<=h),i||!(o&j.RIGHT)||s&j.RIGHT||(m=g-(u-h)*_,i=m>=a&&m<=l),i||!(o&j.BELOW)||s&j.BELOW||(p=u-(g-a)/_,i=p>=r&&p<=h),i||!(o&j.LEFT)||s&j.LEFT||(m=g-(u-r)*_,i=m>=a&&m<=l)}return i}(s,a,h),r)return r;var a,h;return!1}(t,e,n,i));var r,a}function ze(t,e,n,i){for(;e<n-i;){for(let s=0;s<i;++s){const o=t[e+s];t[e+s]=t[n-i+s],t[n-i+s]=o}e+=i,n-=i}}function ke(t,e,n,i){let s=0,o=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];s+=(n-o)*(i+r),o=n,r=i}return 0===s?void 0:s>0}function Ke(t,e,n,i,s){s=void 0!==s&&s;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=ke(t,e,r,i);(0===o?s&&a||!s&&!a:s&&!a||!s&&a)&&ze(t,e,r,i),e=r}return e}class Ge extends Ce{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?function(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ge(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<B(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,s){for(let o=0,r=n.length;o<r;++o){const r=n[o];s=xe(t,e,r,i,s),e=r}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,s,o,r,a,h,l,c){c=c||[NaN,NaN];for(let d=0,u=n.length;d<u;++d){const u=n[d];l=we(t,e,u,i,s,o,r,a,h,l,c),e=u}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return De(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function(t,e,n,i){let s=0;for(let o=0,r=n.length;o<r;++o){const r=n[o];s+=Pe(t,e,r,i),e=r}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Ke(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,function(t,e,n,i,s){s=void 0!==s?s:[];let o=0;for(let r=0,a=n.length;r<a;++r){const a=n[r];s[o++]=Ie(t,e,a,i,s[o]),e=a}return s.length=o,s}(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Q(this.getExtent());this.flatInteriorPoint_=function(t,e,n,i,s,o,a){let h,l,c,d,u,g,_;const p=s[o+1],m=[];for(let s=0,o=n.length;s<o;++s){const o=n[s];for(d=t[o-i],g=t[o-i+1],h=e;h<o;h+=i)u=t[h],_=t[h+1],(p<=g&&_<=p||g<=p&&p<=_)&&(c=(p-g)/(_-g)*(u-d)+d,m.push(c)),d=u,g=_}let f=NaN,v=-1/0;for(m.sort(r),d=m[0],h=1,l=m.length;h<l;++h){u=m[h];const s=Math.abs(u-d);s>v&&(c=(d+u)/2,De(t,e,n,i,c,p)&&(f=c,v=s)),d=u}return isNaN(f)&&(f=s[o]),a?(a.push(f,p,v),a):[f,p,v]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ae(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Me(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let s=0;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=new Me(e.slice(s,r),t);i.push(a),s=r}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i,s){s=void 0!==s&&s;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=ke(t,e,r,i);if(0===o){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;e=r}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ke(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,s,o,r,a){for(let h=0,l=n.length;h<l;++h){const l=n[h];r=Le(t,e,l,i,s,o,r),a.push(r),e=l}return r}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Ge(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return function(t,e,n,i,s){if(!function(t,e,n,i,s){return!!(Fe(t,e,n,i,s)||Oe(t,e,n,i,s[0],s[1])||Oe(t,e,n,i,s[0],s[3])||Oe(t,e,n,i,s[2],s[1])||Oe(t,e,n,i,s[2],s[3]))}(t,e,n[0],i,s))return!1;if(1===n.length)return!0;for(let e=1,o=n.length;e<o;++e)if(Ne(t,n[e-1],n[e],i,s)&&!Fe(t,n[e-1],n[e],i,s))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,s){s=s||[];let o=0;for(let r=0,a=n.length;r<a;++r){const a=Re(t,e,n[r],i);s[o++]=a,e=a}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var Ve=Ge;function Ze(t){const e=t[0],n=t[1],i=t[2],s=t[3],o=[e,n,e,s,i,s,i,n,e,n];return new Ge(o,"XY",[o.length])}function je(t,e){setTimeout((function(){t(e)}),0)}function Be(t){return!(t.sourceCenter&&t.targetCenter&&!Gt(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Ue(t,e,n,i,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,h=t[1]*o+t[0]*r;return a+=(e[0]/2-n[0])*i,h+=(n[1]-e[1]/2)*i,r=-r,[a*o-h*r,h*o+a*r]}var qe=class extends T{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Qt(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&function(t){Ut=!(void 0===t||t)}(),t.center&&(t.center=ne(t.center,this.projection_)),t.extent&&(t.extent=ie(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in wt)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;let s=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const r=void 0!==t.zoomFactor?t.zoomFactor:2,h=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,d=Qt(t.projection,"EPSG:3857"),u=d.getExtent();let g=t.constrainOnlyCenter,_=t.extent;if(h||_||!d.isGlobal()||(g=!1,_=u),void 0!==t.resolutions){const r=t.resolutions;n=r[s],i=void 0!==r[o]?r[o]:r[r.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(s,o,r,h){if(void 0!==s){const l=t[0],c=t[t.length-1],d=n?le(l,n,r,i):l;if(h)return e?ce(s,d,c):st(s,c,d);const u=Math.min(d,s),g=Math.floor(a(t,u,o));return t[g]>d&&g<t.length-1?t[g+1]:t[g]}}}(r,l,!g&&_,c):de(n,i,l,!g&&_,c)}else{const a=(u?Math.max(et(u),J(u)):360*Rt.degrees/d.getMetersPerUnit())/256/Math.pow(2,0),h=a/Math.pow(2,28);n=t.maxResolution,void 0!==n?s=0:n=a/Math.pow(r,s),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(r,o):a/Math.pow(r,o):h),o=s+Math.floor(Math.log(n/i)/Math.log(r)),i=n/Math.pow(r,o-s),e=t.constrainResolution?function(t,e,n,i,s,o){return i=void 0===i||i,n=void 0!==n?n:0,function(r,a,h,l){if(void 0!==r){const c=s?le(e,s,h,o):e;if(l)return i?ce(r,c,n):st(r,n,c);const d=1e-9,u=Math.ceil(Math.log(e/c)/Math.log(t)-d),g=-a*(.5-d)+.5,_=Math.min(c,r),p=Math.floor(Math.log(e/_)/Math.log(t)+g),m=Math.max(u,p);return st(e/Math.pow(t,m),n,c)}}}(r,n,i,l,!g&&_,c):de(n,i,l,!g&&_,c)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:s,zoomFactor:r}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ae(t.extent,t.constrainOnlyCenter,e)}const e=Qt(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ae(t,!1,!1)}return he}(t),s=n.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){const n=t.constrainRotation;return void 0===n||!0===n?(e=e||5*Math.PI/180,function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}):!1===n?ge:"number"==typeof n?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(n):ge}var e;return ue}(t);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-e[3]+e[1]-i[1]),r=s/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=ne(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=ne(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&je(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),r=this.targetResolution_,a=this.targetRotation_;const h=[];for(;i<n;++i){const t=arguments[i],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||pe,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=r,n.targetResolution=this.getResolutionForZoom(t.zoom),r=n.targetResolution):t.resolution&&(n.sourceResolution=r,n.targetResolution=t.resolution,r=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=at(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}Be(n)?n.complete=!0:s+=n.duration,h.push(n)}this.animations_.push(h),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&je(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const r=t-o.start;let a=o.duration>0?r/o.duration:1;a>=1?(o.complete=!0,a=1):s=!1;const h=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const s=t+h*(n-t),r=e+h*(i-e);this.targetCenter_=[s,r]}if(o.sourceResolution&&o.targetResolution){const t=1===h?o.targetResolution:o.sourceResolution+h*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===h?at(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+h*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&je(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();var s,o;return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Vt(n,t-this.getRotation()),o=e,(s=n)[0]+=+o[0],s[1]+=+o[1]),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),s=this.getResolution();return void 0!==i&&void 0!==s&&(n=[e[0]-t*(e[0]-i[0])/s,e[1]-t*(e[1]-i[1])/s]),n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?ee(t,this.getProjection()):t}getCenterInternal(){return this.get(wt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();G(e,1);const n=this.getResolution();G(void 0!==n,2);const i=this.getRotation();return G(void 0!==i,3),$(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(wt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ie(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=et(t)/e[0],i=J(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(wt.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();i=Ue(i,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const s=a(this.resolutions_,t,1);i=s,e=this.resolutions_[s],n=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=st(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,st(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(G(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))G(!it(t),25),n=Ze(ie(t,this.getProjection()));else if("Circle"===t.getType()){const e=ie(t.getExtent(),this.getProjection());n=Ze(e),n.rotate(this.getRotation(),Q(e))}else{const e=te();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*n-s[t+1]*i,o=s[t]*i+s[t+1]*n;r=Math.min(r,e),a=Math.min(a,o),h=Math.max(h,e),l=Math.max(l,o)}return[r,a,h,l]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const h=this.getRotation(),l=Math.sin(h),c=Math.cos(h),u=Q(r);u[0]+=(i[1]-i[3])/2*a,u[1]+=(i[0]-i[2])/2*a;const g=u[0]*c-u[1]*l,_=u[1]*c+u[0]*l,p=this.getConstrainedCenter([g,_],a),m=e.callback?e.callback:d;void 0!==e.duration?this.animateInternal({resolution:a,center:p,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),je(m,!0))}centerOn(t,e,n){this.centerOnInternal(ne(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(Ue(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-n),a=Ue(t,i,[r[0]/2+o[3],r[1]/2+o[0]],e,n);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=ee(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ne(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ne(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?ne(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,n),r=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(wt.ROTATION)!==i&&this.set(wt.ROTATION,i),this.get(wt.RESOLUTION)!==o&&(this.set(wt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),r&&this.get(wt.CENTER)&&Gt(this.get(wt.CENTER),r)||this.set(wt.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&Gt(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:_e,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,n){n=n&&ne(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};function He(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}var We=class extends Ct{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(yt,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(yt)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(R(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=x(t,p,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof qe?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const s=this.getExtent();return He(i,e.viewState)&&(!s||nt(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let i=e(t instanceof qe?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(R(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(R(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=x(t,Et,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);G(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=x(this,p,t.render,t),this.changed())}setSource(t){this.set(yt,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Xe(t,e){ct.expire()}var Ye=class extends o{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){I()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Z(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;G(0!==n,32);const s=e[0],o=e[1],r=e[2],a=e[3],h=e[4],l=e[5];t[0]=a/n,t[1]=-o/n,t[2]=-r/n,t[3]=s/n,t[4]=(r*l-a*h)/n,t[5]=-(s*l-o*h)/n}(i,n)}forEachFeatureAtCoordinate(t,e,n,i,s,o,r,a){let h;const l=e.viewState;function c(t,e,n,i){return s.call(o,e,t?n:null,i)}const d=l.projection,u=function(t,e){if(e.canWrapX()){const n=et(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||et(i),s=Math.floor((t[0]-i[0])/n)),s}(t,e,n);i&&(t[0]-=i*n)}return t}(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&i){const t=et(d.getExtent());g.push([-t,0],[t,0])}const _=e.layerStatesArray,p=_.length,m=[],f=[];for(let i=0;i<g.length;i++)for(let s=p-1;s>=0;--s){const o=_[s],d=o.layer;if(d.hasRenderer()&&He(o,l)&&r.call(a,d)){const s=d.getRenderer(),r=d.getSource();if(s&&r){const a=r.getWrapX()?u:t,l=c.bind(null,o.managed);f[0]=a[0]+g[i][0],f[1]=a[1]+g[i][1],h=s.forEachFeatureAtCoordinate(f,e,n,l,m)}if(h)return h}}if(0===m.length)return;const v=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*v)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>h=t.callback(t.feature,t.layer,t.geometry))),h}hasFeatureAtCoordinate(t,e,n,i,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,l,this,s,o)}getMap(){return this.map_}renderFrame(t){I()}scheduleExpireIconCache(t){ct.canExpireCache()&&t.postRenderFunctions.push(Xe)}},Qe=class extends e{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}};const $e="ol-hidden",Je="ol-unselectable",tn="ol-control",en="ol-collapsed",nn=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),"undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():""),sn=nn.includes("firefox"),on=(nn.includes("safari")&&!nn.includes("chrom")&&(nn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(nn)),nn.includes("webkit")&&!nn.includes("edge")),rn=nn.includes("macintosh"),an="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,hn=("undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),"undefined"!=typeof Image&&Image.prototype.decode,function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}());function ln(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function cn(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}const dn=new T;!function(){const t=["monospace","serif"];t.length}();var un=class extends Ye{constructor(t){super(t),this.fontChangeListenerKey_=x(dn,s,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Je+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new Qe(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){R(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(Et,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=[];let s=null;for(let o=0,r=e.length;o<r;++o){const r=e[o];t.layerIndex=o;const a=r.layer,h=a.getSourceState();if(!He(r,n)||"ready"!=h&&"undefined"!=h){a.unrender();continue}const l=a.render(t,s);l&&(l!==s&&(this.children_.push(l),s=l),"getDeclutter"in a&&i.push(a))}for(let e=i.length-1;e>=0;--e)i[e].renderDeclutter(t);!function(t,e){const n=t.childNodes;for(let i=0;;++i){const s=n[i],o=e[i];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};class gn extends e{constructor(t,e){super(t),this.layer=e}}const _n="layers";class pn extends Ct{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_n,this.handleLayersChanged_),n?Array.isArray(n)?n=new K(n.slice(),{unique:!0}):G("function"==typeof n.getArray,43):n=new K(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(R),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(x(t,D,this.handleLayersAdd_,this),x(t,F,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(R);u(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new gn("addlayer",n))}this.changed()}registerLayerListeners_(t){const e=[x(t,s,this.handleLayerChange_,this),x(t,p,this.handleLayerChange_,this)];t instanceof pn&&e.push(x(t,"addlayer",this.handleLayerGroupAdd_,this),x(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[S(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new gn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new gn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new gn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=S(e);this.listenerKeys_[n].forEach(R),delete this.listenerKeys_[n],this.dispatchEvent(new gn("removelayer",e)),this.changed()}getLayers(){return this.get(_n)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new gn("removelayer",t[e]))}this.set(_n,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let s=i.zIndex;t||void 0!==i.zIndex||(s=0);for(let t=n,o=e.length;t<o;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=tt(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=s)}return e}getSourceState(){return"ready"}}var mn=pn,fn=class extends e{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}},vn=class extends fn{constructor(t,e,n,i,s,o){super(t,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},yn={SINGLECLICK:"singleclick",CLICK:f,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Cn="pointerdown",En=class extends g{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=x(n,Cn,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=x(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(C,this.boundHandleTouchMove_,!!hn&&{passive:!1})}emulateClick_(t){let e=new vn(yn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new vn(yn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new vn(yn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==yn.POINTERUP||e.type==yn.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=yn.POINTERDOWN&&e.type!=yn.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new vn(yn.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(R),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new vn(yn.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(x(t,yn.POINTERMOVE,this.handlePointerMove_,this),x(t,yn.POINTERUP,this.handlePointerUp_,this),x(this.element_,yn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(x(this.element_.getRootNode(),yn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new vn(yn.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new vn(yn.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(R(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(C,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(R(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(R),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},xn="postrender",wn="loadstart",Rn="loadend",bn="layergroup",Ln="size",In="target",Pn="view";const Sn=1/0;var Mn=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,u(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){G(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Sn&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,s=e[t],o=n[t],r=t;for(;t<i>>1;){const s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),r=o<i&&n[o]<n[s]?o:s;e[t]=e[r],n[t]=n[r],t=r}e[t]=s,n[t]=o,this.siftDown_(r,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,s=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=s,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const s=e.length;let o,r,a;for(r=0;r<s;++r)o=e[r],a=t(o),a==Sn?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,e[i++]=o);e.length=i,n.length=i,this.heapify_()}},Tn=class extends Mn{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(p,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(2===n||3===n||4===n){3!==n&&e.removeEventListener(p,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,s,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],s=i.getKey(),n=i.getState(),0!==n||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,i.load())}},An=class extends T{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){cn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&cn(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)R(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==d&&this.listenerKeys.push(x(t,xn,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},Nn=class extends An{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const r=void 0!==t.label?t.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r,this.label_.className=i):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(f,this.handleClick_.bind(this),!1);const h=e+" "+Je+" "+tn+(this.collapsed_&&this.collapsible_?" "+en:"")+(this.collapsible_?"":" ol-uncollapsible"),l=this.element;l.className=h,l.appendChild(this.toggleButton_),l.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),n=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!h(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(en),this.collapsed_?ln(this.collapseLabel_,this.label_):ln(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},On=class extends An{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(f,this.handleClick_.bind(this),!1);const r=e+" "+Je+" "+tn,a=this.element;a.className=r,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add($e)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:_e}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains($e);t||0!==n?t&&0!==n&&this.element.classList.remove($e):this.element.classList.add($e)}this.label_.style.transform=t}this.rotation_=n}},Dn=class extends An{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",h=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=i,l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),l.addEventListener(f,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof r?document.createTextNode(r):r),c.addEventListener(f,this.handleClick_.bind(this,-n),!1);const d=e+" "+Je+" "+tn,u=this.element;u.className=d,u.appendChild(l),u.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:_e})):e.setZoom(i)}}},Fn="active";function zn(t,e,n,i){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),r=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:n,duration:void 0!==i?i:250,easing:_e})}var kn=class extends T{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fn)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fn,t)}setMap(t){this.map_=t}},Kn=class extends kn{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==yn.DBLCLICK){const n=t.originalEvent,i=t.map,s=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;zn(i.getView(),o,s,this.duration_),n.preventDefault(),e=!0}return!e}};function Gn(t){const e=t.length;let n=0,i=0;for(let s=0;s<e;s++)n+=t[s].clientX,i+=t[s].clientY;return{clientX:n/e,clientY:i/e}}var Vn=class extends kn{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==yn.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==yn.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==yn.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==yn.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Zn(t){const e=arguments;return function(t){let n=!0;for(let i=0,s=e.length;i<s&&(n=n&&e[i](t),n);++i);return n}}const jn=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Bn=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Un=l,qn=function(t){const e=t.originalEvent;return 0==e.button&&!(on&&rn&&e.ctrlKey)},Hn=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Wn=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Xn=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},Yn=function(t){const e=t.originalEvent;return G(void 0!==e,56),"mouse"==e.pointerType},Qn=function(t){const e=t.originalEvent;return G(void 0!==e,56),e.isPrimary&&0===e.button};var $n=class extends Vn{constructor(t){super({stopDown:c}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Zn(Hn,Qn);this.condition_=t.onFocusOnly?Zn(Bn,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Gn(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();s=e,o=n.getResolution(),s[0]*=o,s[1]*=o,Vt(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();var s,o;this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),s=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(r),duration:500,easing:_e})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Jn=class extends Vn{constructor(t){t=t||{},super({stopDown:c}),this.condition_=t.condition?t.condition:jn,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Yn(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===ue)return;const i=e.getSize(),s=t.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!Yn(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!Yn(t)&&(!(!qn(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}},ti=class extends o{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ve([n])}getGeometry(){return this.geometry_}};class ei extends e{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}var ni=class extends Vn{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new ti(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:qn,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],s=n[1]-e[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ei("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new ei(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ei("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},ii=class extends ni{constructor(t){super({condition:(t=t||{}).condition?t.condition:Wn,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),s=e.getResolution()/i;n=n.clone(),n.scale(s*s)}e.fitInternal(n,{duration:this.duration_,easing:_e})}},si="ArrowLeft",oi="ArrowRight",ri="ArrowDown",ai=class extends kn{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Hn(t)&&Xn(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==v){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==ri||i==si||i==oi||"ArrowUp"==i)){const s=t.map.getView(),o=s.getResolution()*this.pixelDelta_;let r=0,a=0;i==ri?a=-o:i==si?r=-o:i==oi?r=o:a=o;const h=[r,a];Vt(h,s.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:me,center:t.getConstrainedCenter(s)})}}(s,h,this.duration_),n.preventDefault(),e=!0}}return!e}},hi=class extends kn{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Xn,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==v||t.type==y){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const s=t.map,o="+"===i?this.delta_:-this.delta_;zn(s.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},li=class extends kn{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Un;this.condition_=t.onFocusOnly?Zn(Bn,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==E)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==E&&(i=n.deltaY,sn&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=an),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=i;const r=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-st(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),zn(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},ci=class extends Vn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const o=t.map,r=o.getView();r.getConstraints().rotation!==ue&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Gn(this.targetPointers))),this.rotating_&&(o.render(),r.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},di=class extends Vn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],s=n.clientX-i.clientX,o=n.clientY-i.clientY,r=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const a=t.map,h=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Gn(this.targetPointers))),a.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function ui(t){return t[0]>0&&t[1]>0}function gi(t){t instanceof We?t.setMapInternal(null):t instanceof mn&&t.getLayers().forEach(gi)}function _i(t,e){if(t instanceof We)t.setMapInternal(e);else if(t instanceof mn){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)_i(n[t],e)}}class pi extends T{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new pi(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(R(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=x(t,p,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;return Array.isArray(t)?e=t:(G("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}var mi=pi;n(136),window.hello=function(){alert("hello")},document.body.appendChild(function(){const t=document.createElement("div");return t.innerHTML=_.join(["Hello","webpack"]," "),t}()),new t.layer.Tile({source:new t.source.OSM});var fi=new t.source.Vector,vi=new t.layer.Vector({source:fi,style:new t.style.Style({stroke:new t.style.Stroke({width:2,color:[0,0,255,1]})})}),yi=new class extends T{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new mn({layers:t.layers});let s,o,r;return n[bn]=i,n[In]=t.target,n[Pn]=t.view instanceof qe?t.view:new qe,void 0!==t.controls&&(Array.isArray(t.controls)?s=new K(t.controls.slice()):(G("function"==typeof t.controls.getArray,47),s=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new K(t.interactions.slice()):(G("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new K(t.overlays.slice()):(G("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new K,{controls:s,interactions:o,keyboardEventTarget:e,overlays:r,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:an,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new K;return(void 0===t.zoom||t.zoom)&&e.push(new Dn(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new On(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Nn(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new K,n=new class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const s=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Jn),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Kn({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new $n({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new ci),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new di({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new ai),e.push(new hi({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new li({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new ii({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Tn(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(bn,this.handleLayerGroupChanged_),this.addChangeListener(Pn,this.handleViewChanged_),this.addChangeListener(Ln,this.handleSizeChanged_),this.addChangeListener(In,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof qe||t.view.then((function(t){n.setView(new qe(t))})),this.controls.addEventListener(D,(t=>{t.element.setMap(this)})),this.controls.addEventListener(F,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(D,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(F,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(D,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(F,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){_i(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),s=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:l,r=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof mn?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],s=e.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/i,(o.clientY-e.top)/s]}getTarget(){return this.get(In)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ee(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?V(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(bn)}setLayers(t){const e=this.getLayerGroup();if(t instanceof K)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const s=n.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ne(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?V(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ln)}getView(){return this.get(Pn)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,s){if(!t||!(n in t.wantedTiles))return Sn;if(!t.wantedTiles[n][e.getKey()])return Sn;const o=t.viewState.center,r=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+a*a)/s}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new vn(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===Cn||n===E||n===v){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()===this&&i.getActive()&&this.getTargetElement()&&(!i.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[0]||e[1]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(xt)&&this.renderer_.dispatchRenderEvent(xt,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new fn(Rn,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new fn(wn,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)R(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(E,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,cn(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new un(this)),this.mapBrowserEventHandler_=new En(this,this.moveTolerance_);for(const t in yn)this.mapBrowserEventHandler_.addEventListener(yn[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(E,this.boundHandleBrowserEvent_,!!hn&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[x(t,v,this.handleBrowserEvent,this),x(t,y,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(R(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(R(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=x(t,s,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=x(t,p,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(R),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new gn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[x(t,s,this.render,this),x(t,p,this.render,this),x(t,"addlayer",this.handleLayerAdd_,this),x(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){gi(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let s=null;if(void 0!==e&&ui(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:$(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:S(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=$(o.nextCenter,o.nextResolution,t,e)}}var o,r;this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!it(this.previousExtent_)&&!W(s.extent,this.previousExtent_))&&(this.dispatchEvent(new fn("movestart",this,i)),this.previousExtent_=H(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!W(s.extent,this.previousExtent_)&&(this.dispatchEvent(new fn("moveend",this,s)),o=s.extent,(r=this.previousExtent_)?(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3]):o.slice())),this.dispatchEvent(new fn(xn,this,s)),this.renderComplete_=this.hasListener(wn)||this.hasListener(Rn)||this.hasListener(xt)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new gn("removelayer",e)),this.set(bn,t)}setSize(t){this.set(Ln,t)}setTarget(t){this.set(In,t)}setView(t){if(!t||t instanceof qe)return void this.set(Pn,t);this.set(Pn,new qe);const e=this;t.then((function(t){e.setView(new qe(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),s=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(s)||(e=[i,s],!ui(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Bt("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&h(e,n)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}({layers:[new t.layer.Tile({source:new t.source.OSM}),vi],target:"map",view:new qe({center:[14149156.937231855,4510270.163387867],zoom:18})});yi.on("click",(e=>{var n=yi.getSize(),i=yi.getView().calculateExtent(n),s=t.proj.toLonLat(t.extent.getBottomLeft(i)),o=t.proj.toLonLat(t.extent.getTopRight(i)),r=t.proj.toLonLat(t.extent.getBottomRight(i)),a=t.proj.toLonLat(t.extent.getTopLeft(i)),h=new mi(new t.geom.LineString([[s[0],s[1]],[r[0],r[1]],[o[0],o[1]],[a[0],a[1]],[s[0],s[1]]])),l=[[s[0],s[1]],[r[0],r[1]],[o[0],o[1]],[a[0],a[1]],[s[0],s[1]]];console.log(l);var c=t.proj.get("EPSG:4326"),d=t.proj.get("EPSG:3857");h.getGeometry().transform(c,d),fi.addFeatures([h])}))}(),common=i}();